# 接口文档

base-url: `http:\\192.168.0.133:9000\`

## all模块

url: `api\all\`

### 测试Endpoint

* url: `test_endpoint`  
* method: `GET POST PUT DELETE`
* request: `None`
* response: `good job`

### 登录

* url: `login`  
* method: `POST`
* request:

```json
{
    "username": "admin",
    "password": "admin"
}
```

* response:

```json
{
    "token": "Token 22591812540bd094f279992db3320fafb017faa3",
    "groups": []
}
```

### 查询企业

* url: `companies`  
* method: `GET`
* request:

```json
{
    "tp": "餐饮"
}
```

* response:

```json
[
    {
        "id": 1,
        "date_joined": "2020-05-02T19:33:00+08:00",
        "name": "老张搓背",
        "tp": "餐饮",
        "telephone": "36873687",
        "address": "气象台",
        "introduce": "我开心我骄傲"
    },
    {
        "id": 2,
        "date_joined": "2020-05-02T19:37:00+08:00",
        "name": "伸腿瞪眼丸",
        "tp": "餐饮",
        "telephone": "1414114",
        "address": "气象台",
        "introduce": "跟隔壁老张搓背是一家"
    }
]
```

### 查询公告信息

* url: `announcements`  
* method: `GET`
* request:
* response:

```json
[
    {
        "id": 1,
        "date_joined": "2020-05-04T12:07:00+08:00",
        "title": "老张搓背今日开业啦！",
        "author": "admin",
        "content": "全场9折"
    }
]
```

## employee模块

url: `api\employee`

### 查询所有房间

* url: `rooms`  
* method: `GET`
* request: `None`
* response:

```json
[
    {
        "id": "101",
        "emp": {
            "date_joined": "2020-05-12T22:18:00+08:00",
            "username": "emp01",
            "first_name": "",
            "sex": "男",
            "telephone": "123",
            "address": "广西"
        },
        "olds": [
            {
                "date_joined": "2020-05-02T17:56:00+08:00",
                "username": "001",
                "first_name": "老张",
                "sex": "男",
                "room": "101",
                "telephone": "12312341234",
                "address": "湖南气象台"
            }
        ],
        "status": "未使用"
    }
]
```

## old模块

url: `api\old`

### 查询所有老人

* url: `olds`  
* method: `GET`
* request: `None`
* response:

```json
[
    {
        "date_joined": "2020-05-02T17:56:00+08:00",
        "username": "001",
        "first_name": "老张",
        "sex": "男",
        "room": null,
        "telephone": "12312341234",
        "address": "湖南气象台"
    }
]
```

### 修改老人

* url: `olds/<str:username>`
* method: `PUT`
* request:

```json
{
	"first_name": "老王"
}
```

* response:

```json
{
    "date_joined": "2020-05-02T17:56:00+08:00",
    "username": "001",
    "first_name": "老王",
    "sex": "男",
    "room": "101",
    "telephone": "12312341234",
    "address": "湖南气象台"
}
```
